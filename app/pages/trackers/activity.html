
<ul class="breadcrumb">
  <li><a href="/">Home</a><span class="divider">»</span></li>
  <li><a href="/trackers">Projects</a><span class="divider">»</span></li>
  <li><a ng-href="/trackers/{{tracker.slug}}">{{ tracker.name ||'Loading...' }}</a></li>
</ul>

<div class="row-fluid" ng-show="tracker">
  <div class="span3">
    <div class="well text-center">
      <div><img ng-src="{{tracker.large_image_url}}" /></div>
      <br />
      <button class="btn btn-block" ng-click="tracker.follow()">
        <span ng-show="tracker.followed">
          <i class="icon-star"></i>
          Following this project
        </span>
        <span ng-hide="tracker.followed">
          <i class="icon-star-empty"></i>
          Follow this project
        </span>
      </button>

      <a ng-href="{{tracker.url}}" target="_blank" class="btn btn-block">
        <i class="icon-globe"></i>
        View Repository
      </a>
    </div>

    <div class="well well-small" ng-show="tracker.bounty_total > 0 || tracker.tracker_type == 'Github::Repository'">
      <div class="text-center" ng-show="tracker.bounty_total > 0">
        <a ng-click="show_bounties()"><h2 style="margin: 0;" class="text-center">{{tracker.bounty_total | dollars}}</h2></a>
        <div>in bounties</div>
      </div>

      <div class="row-fluid" ng-show="tracker.tracker_type == 'Github::Repository'">
        <div class="span6 text-center">
          <h3 style="margin: 0;">{{tracker.forks || 0 | number}}</h3>
          <div>{{'fork' | pluralize:tracker.forks}}</div>
        </div>
        <div class="span6 text-center">
          <h3 style="margin: 0;">{{tracker.watchers || 0 | number}}</h3>
          <div>{{'watcher' | pluralize:tracker.watchers}}</div>
        </div>
      </div>
    </div>
  </div>

  <div class="span9">
    <h1>{{tracker.name}}</h1>
    <p class="lead">{{tracker.description}}</p>
    <div ng-include="'pages/trackers/partials/nav_tabs.html'"></div>
    <!--<hr />-->
    <div collapse="hasActivities" class="text-center">
      <p class="lead">Loading activities...</p>
      <div class="progress progress-striped active">
        <div class="bar" style="width: 100%;"></div>
      </div>
    </div>

    <!--Issue filter box-->
<!--     <table class="table table-condensed table-striped" ng-show="hasActivities">
      <tr ng-repeat="bounty in bounties | orderBy:'-created_at'">
        <td>{{bounty.person.display_name}} posted a bounty on <a ng-href="{{bounty.code_url}}">{{bounty.issue.title}}</a></td>
        <td class="muted">{{ bounty.created_at | date:'medium' }}</td>
      </tr>
    </table>
    <hr /> -->
    <table class="table table-condensed table-striped" ng-show="hasActivities" >
      <tr ng-repeat="action in timeline | orderBy:'-created_at'">
        
        <td ng-show="action.type == 'bounty'">{{action.person.display_name}} posted a bounty on <a ng-href="/issues/{{action.issue.id}}">{{action.issue.title}}</a></td>
        <td ng-show="action.type == 'bounty'" class="muted">{{ action.created_at | date:'medium' }}</td>

        <td ng-show="action.type == 'submitted'">{{action.person.display_name}} claimed a {{ action.issue.bounty_total | dollars}} bounty on <a ng-href="/issues/{{action.issue.id}}">{{action.issue.title}}</a></td>
        <td ng-show="action.type == 'submitted'" class="muted">{{ action.created_at | date:'medium' }}</td>

        <td ng-show="action.type == 'collected'">{{action.person.display_name}} received a bounty of {{ action.issue.bounty_total | dollars}} for resolving <a ng-href="/issues/{{action.issue.id}}">{{action.issue.title}}</a></td>
        <td ng-show="action.type == 'collected'" class="muted">{{ generate_date(action)| date:'medium' }}</td>

        <td ng-show="action.type == 'rejected'">The bounty claim submitted by {{action.person.display_name}} was rejected for <a ng-href="/issues/{{action.issue.id}}">{{action.issue.title}}</a></td>
        <td ng-show="action.type == 'rejected'" class="muted">{{ generate_date(action) | date:'medium' }}</td>
      </tr>

    </table>

  </div>
</div>
