<ul class="breadcrumb">
  <li><a href="/">Home</a><span class="divider">»</span></li>
  <li><a href="/teams">Teams</a><span class="divider">»</span></li>
  <li><a ng-href="/teams/{{team.slug}}">{{team.name || 'Loading...'}}</a><span class="divider">»</span></li>
  <li><a ng-href="/teams/{{team.slug}}/members">Members</a><span class="divider">»</span></li>
  <li><a>Manage</a></li>
</ul>

<div ng-show="team && members" ng-controller="ManageTeamMembersController">
  <div class="row-fluid">
    <div class="span3">
      <ng-include src="'pages/teams/partials/infobox.html'"></ng-include>
    </div>
    <div class="span9">
      <ng-include src="'pages/teams/partials/tabs.html'"></ng-include>

      <div class="row-fluid">
        <div class="span8">
          <table class="table table-hover">
            <thead>
            <tr>
              <th style="width: 30%; text-align: center;"></th>
              <th style="width: 10%; text-align: center;">Public</th>
              <th style="width: 10%; text-align: center;">Spender</th>
              <th style="width: 10%; text-align: center;">Admin</th>
              <th style="width: 10%; text-align: center;"></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="member in members" ng-class="{ 'info': (member.$dirty) }">
              <td>
                <a ng-href="/people/{{member.slug}}">{{member.display_name}}</a>
              </td>
              <td style="text-align: center;">
                <input type="checkbox" ng-model="member.is_public" ng-change="member_changed(member)" />
              </td>
              <td style="text-align: center;">
                <input type="checkbox" ng-model="member.is_spender" ng-change="member_changed(member)" />
              </td>
              <td style="text-align: center;">
                <input type="checkbox" ng-model="member.is_admin" ng-change="member_changed(member)" ng-disabled="is_admin && current_person.id == member.id" />
              </td>
              <td style="text-align: center;">
                <div collapse="member.$dirty">
                  <button ng-click="remove_member(member)" class="btn btn-mini btn-danger" ng-disabled="member.id == current_person.id"><i class="icon-trash icon-white"></i></button>
                </div>
                <div collapse="!member.$dirty">
                  <button ng-click="update_member(member)" class="btn btn-mini btn-primary" ><i class="icon-ok icon-white"></i></button>
                  <button ng-click="cancel_member_changes(member)" class="btn btn-mini" ><i class="icon-remove"></i></button>
                </div>
              </td>
            </tr>
            </tbody>
          </table>

          <div class="alert alert-error" ng-show="new_member.error">
            {{new_member.error}}
          </div>

          <!-- Add new member input -->
          <form ng-submit="add_member()">
            <span style="margin-right: 5px;"><strong class="">Add member:</strong></span>
            <input type="email" class="search-query span6" ng-model="new_member.email" placeholder="Member email address" />
          </form>
        </div>
        <div class="span4">
          <div class="well">
            <h4>Public</h4>
            <p>Publicly displayed as a member of {{team.name}} on the <a ng-href="/teams/{{team.slug}}/members">members</a> tab.</p>
            <h4>Spender</h4>
            <p>Authorized to <strong>spend money</strong> from the {{team.name}} account.</p>
            <h4>Admin</h4>
            <p>Can <strong>add/remove projects and members</strong> to the team, as well as <strong>assign roles</strong> to members.</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
